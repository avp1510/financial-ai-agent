<?plantuml 1.2026.0?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="1251px" preserveAspectRatio="none" style="width:1235px;height:1251px;background:#FFFFFF;" version="1.1" viewBox="0 0 1235 1251" width="1235px" zoomAndPan="magnify"><title>Fault Tolerance and Error Handling Flow</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="291.4775" x="467.9138" y="28.5352">Fault Tolerance and Error Handling Flow</text><rect fill="none" height="622.1211" style="stroke:#000000;stroke-width:1.5;" width="892.7847" x="325.5205" y="310.5293"/><rect fill="none" height="245.4395" style="stroke:#000000;stroke-width:1.5;" width="872.7847" x="335.5205" y="510.3477"/><rect fill="none" height="184.8184" style="stroke:#000000;stroke-width:1.5;" width="852.7847" x="345.5205" y="563.9688"/><rect fill="none" height="155.8633" style="stroke:#000000;stroke-width:1.5;" width="480.1479" x="345.5205" y="769.7871"/><rect fill="none" height="75.9316" style="stroke:#000000;stroke-width:1.5;" width="845.0415" x="125.1094" y="1048.582"/><g class="participant-lifeline" data-entity-uid="part1" data-qualified-name="User" id="part1-lifeline"><g><title>User</title><rect fill="#000000" fill-opacity="0.00000" height="1051.8477" width="8" x="19.1826" y="118.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="23" x2="23" y1="118.9766" y2="1170.8242"/></g></g><g class="participant-lifeline" data-entity-uid="part2" data-qualified-name="AppSvc" id="part2-lifeline"><g><title>Application</title><rect fill="#000000" fill-opacity="0.00000" height="1051.8477" width="8" x="176.5342" y="118.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="180.1094" x2="180.1094" y1="118.9766" y2="1170.8242"/></g></g><g class="participant-lifeline" data-entity-uid="part3" data-qualified-name="DomainSvc" id="part3-lifeline"><g><title>Domain</title><rect fill="#000000" fill-opacity="0.00000" height="1051.8477" width="8" x="384.832" y="118.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="388.5205" x2="388.5205" y1="118.9766" y2="1170.8242"/></g></g><g class="participant-lifeline" data-entity-uid="part4" data-qualified-name="Circuit" id="part4-lifeline"><g><title>CircuitBreaker</title><rect fill="#000000" fill-opacity="0.00000" height="1051.8477" width="8" x="577.2354" y="118.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="580.4214" x2="580.4214" y1="118.9766" y2="1170.8242"/></g></g><g class="participant-lifeline" data-entity-uid="part5" data-qualified-name="Retry" id="part5-lifeline"><g><title>Retry</title><rect fill="#000000" fill-opacity="0.00000" height="1051.8477" width="8" x="687.2451" y="118.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="691.0493" x2="691.0493" y1="118.9766" y2="1170.8242"/></g></g><g class="participant-lifeline" data-entity-uid="part6" data-qualified-name="Fallback" id="part6-lifeline"><g><title>Fallback</title><rect fill="#000000" fill-opacity="0.00000" height="1051.8477" width="8" x="777.0547" y="118.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="780.4409" x2="780.4409" y1="118.9766" y2="1170.8242"/></g></g><g class="participant-lifeline" data-entity-uid="part7" data-qualified-name="API" id="part7-lifeline"><g><title>External</title><rect fill="#000000" fill-opacity="0.00000" height="1051.8477" width="8" x="856.3711" y="118.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="859.6685" x2="859.6685" y1="118.9766" y2="1170.8242"/></g></g><g class="participant-lifeline" data-entity-uid="part8" data-qualified-name="Cache" id="part8-lifeline"><g><title>Cache</title><rect fill="#000000" fill-opacity="0.00000" height="1051.8477" width="8" x="928.6123" y="118.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="932.0737" x2="932.0737" y1="118.9766" y2="1170.8242"/></g></g><g class="participant-lifeline" data-entity-uid="part9" data-qualified-name="Logger" id="part9-lifeline"><g><title>Logger</title><rect fill="#000000" fill-opacity="0.00000" height="1051.8477" width="8" x="996.6768" y="118.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1000.1509" x2="1000.1509" y1="118.9766" y2="1170.8242"/></g></g><g class="participant participant-head" data-entity-uid="part1" data-qualified-name="User" id="part1-head"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30.3652" x="5" y="116.0234">User</text><ellipse cx="23.1826" cy="50.9883" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M23.1826,58.9883 L23.1826,85.9883 M10.1826,66.9883 L36.1826,66.9883 M23.1826,85.9883 L10.1826,100.9883 M23.1826,85.9883 L36.1826,100.9883" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-entity-uid="part1" data-qualified-name="User" id="part1-tail"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30.3652" x="5" y="1183.3594">User</text><ellipse cx="23.1826" cy="1194.8125" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M23.1826,1202.8125 L23.1826,1229.8125 M10.1826,1210.8125 L36.1826,1210.8125 M23.1826,1229.8125 L10.1826,1244.8125 M23.1826,1229.8125 L36.1826,1244.8125" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-entity-uid="part2" data-qualified-name="AppSvc" id="part2-head"><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="90.8496" x="135.1094" y="71"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76.8496" x="142.1094" y="91.5352">Application</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47.332" x="156.8682" y="108.0234">Service</text></g><g class="participant participant-tail" data-entity-uid="part2" data-qualified-name="AppSvc" id="part2-tail"><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="90.8496" x="135.1094" y="1169.8242"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76.8496" x="142.1094" y="1190.3594">Application</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47.332" x="156.8682" y="1206.8477">Service</text></g><g class="participant participant-head" data-entity-uid="part3" data-qualified-name="DomainSvc" id="part3-head"><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="66.623" x="355.5205" y="71"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52.623" x="362.5205" y="91.5352">Domain</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47.332" x="365.166" y="108.0234">Service</text></g><g class="participant participant-tail" data-entity-uid="part3" data-qualified-name="DomainSvc" id="part3-tail"><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="66.623" x="355.5205" y="1169.8242"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52.623" x="362.5205" y="1190.3594">Domain</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47.332" x="365.166" y="1206.8477">Service</text></g><g class="participant participant-head" data-entity-uid="part4" data-qualified-name="Circuit" id="part4-head"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="109.6279" x="526.4214" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95.6279" x="533.4214" y="108.0234">CircuitBreaker</text></g><g class="participant participant-tail" data-entity-uid="part4" data-qualified-name="Circuit" id="part4-tail"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="109.6279" x="526.4214" y="1169.8242"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95.6279" x="533.4214" y="1190.3594">CircuitBreaker</text></g><g class="participant participant-head" data-entity-uid="part5" data-qualified-name="Retry" id="part5-head"><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="90.3916" x="646.0493" y="71"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="34.9316" x="673.7793" y="91.5352">Retry</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76.3916" x="653.0493" y="108.0234">Mechanism</text></g><g class="participant participant-tail" data-entity-uid="part5" data-qualified-name="Retry" id="part5-tail"><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="90.3916" x="646.0493" y="1169.8242"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="34.9316" x="673.7793" y="1190.3594">Retry</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76.3916" x="653.0493" y="1206.8477">Mechanism</text></g><g class="participant participant-head" data-entity-uid="part6" data-qualified-name="Fallback" id="part6-head"><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="69.2275" x="746.4409" y="71"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55.2275" x="753.4409" y="91.5352">Fallback</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53.0947" x="754.5073" y="108.0234">Handler</text></g><g class="participant participant-tail" data-entity-uid="part6" data-qualified-name="Fallback" id="part6-tail"><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="69.2275" x="746.4409" y="1169.8242"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55.2275" x="753.4409" y="1190.3594">Fallback</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53.0947" x="754.5073" y="1206.8477">Handler</text></g><g class="participant participant-head" data-entity-uid="part7" data-qualified-name="API" id="part7-head"><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="69.4053" x="825.6685" y="71"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55.4053" x="832.6685" y="91.5352">External</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="21.4307" x="849.6558" y="108.0234">API</text></g><g class="participant participant-tail" data-entity-uid="part7" data-qualified-name="API" id="part7-tail"><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="69.4053" x="825.6685" y="1169.8242"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55.4053" x="832.6685" y="1190.3594">External</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="21.4307" x="849.6558" y="1206.8477">API</text></g><g class="participant participant-head" data-entity-uid="part8" data-qualified-name="Cache" id="part8-head"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="55.0771" x="905.0737" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41.0771" x="912.0737" y="108.0234">Cache</text></g><g class="participant participant-tail" data-entity-uid="part8" data-qualified-name="Cache" id="part8-tail"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="55.0771" x="905.0737" y="1169.8242"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41.0771" x="912.0737" y="1190.3594">Cache</text></g><g class="participant participant-head" data-entity-uid="part9" data-qualified-name="Logger" id="part9-head"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="61.0518" x="970.1509" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47.0518" x="977.1509" y="108.0234">Logger</text></g><g class="participant participant-tail" data-entity-uid="part9" data-qualified-name="Logger" id="part9-tail"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="61.0518" x="970.1509" y="1169.8242"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47.0518" x="977.1509" y="1190.3594">Logger</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1228.3052" x="0" y="149.6318"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1228.3052" y1="149.6318" y2="149.6318"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1228.3052" y1="152.6318" y2="152.6318"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2;" width="138.0713" x="545.1169" y="138.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="119.7866" x="551.1169" y="155.5449">Normal Operation</text><g class="message" data-entity-1="part1" data-entity-2="part2" id="msg1"><polygon fill="#181818" points="168.5342,189.5977,178.5342,193.5977,168.5342,197.5977,172.5342,193.5977" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="23.1826" x2="174.5342" y1="193.5977" y2="193.5977"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83.7256" x="30.1826" y="188.8555">Submit query</text></g><g class="message" data-entity-1="part2" data-entity-2="part3" id="msg2"><polygon fill="#181818" points="376.832,218.9082,386.832,222.9082,376.832,226.9082,380.832,222.9082" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="180.5342" x2="382.832" y1="222.9082" y2="222.9082"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99.2012" x="187.5342" y="218.166">process_query()</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1228.3052" x="0" y="251.5635"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1228.3052" y1="251.5635" y2="251.5635"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1228.3052" y1="254.5635" y2="254.5635"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2;" width="162.8779" x="532.7136" y="240.9082"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="144.5933" x="538.7136" y="257.4766">Circuit Breaker Check</text><g class="message" data-entity-1="part3" data-entity-2="part4" id="msg3"><polygon fill="#181818" points="569.2354,291.5293,579.2354,295.5293,569.2354,299.5293,573.2354,295.5293" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="388.832" x2="575.2354" y1="295.5293" y2="295.5293"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148.8018" x="395.832" y="290.7871">Check if API is available</text></g><path d="M325.5205,310.5293 L387.6592,310.5293 L387.6592,317.8398 L377.6592,327.8398 L325.5205,327.8398 L325.5205,310.5293" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="622.1211" style="stroke:#000000;stroke-width:1.5;" width="892.7847" x="325.5205" y="310.5293"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1387" x="340.5205" y="324.0977">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="144.2461" x="402.6592" y="323.1641">[Circuit Open (API down)]</text><g class="message" data-entity-1="part4" data-entity-2="part3" id="msg4"><polygon fill="#181818" points="399.832,345.1504,389.832,349.1504,399.832,353.1504,395.832,349.1504" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="393.832" x2="580.2354" y1="349.1504" y2="349.1504"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168.4033" x="405.832" y="344.4082">Circuit open - skip API call</text></g><g class="message" data-entity-1="part3" data-entity-2="part6" id="msg5"><polygon fill="#181818" points="769.0547,374.4609,779.0547,378.4609,769.0547,382.4609,773.0547,378.4609" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="388.832" x2="775.0547" y1="378.4609" y2="378.4609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157.0283" x="395.832" y="373.7188">Get cached/fallback data</text></g><g class="message" data-entity-1="part6" data-entity-2="part3" id="msg6"><polygon fill="#181818" points="399.832,403.7715,389.832,407.7715,399.832,411.7715,395.832,407.7715" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="393.832" x2="780.0547" y1="407.7715" y2="407.7715"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112.6899" x="405.832" y="403.0293">Fallback response</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="325.5205" x2="1218.3052" y1="416.7715" y2="416.7715"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="171.9878" x="330.5205" y="427.4063">[Circuit Closed (API available)]</text><g class="message" data-entity-1="part3" data-entity-2="part5" id="msg7"><polygon fill="#181818" points="679.2451,448.0371,689.2451,452.0371,679.2451,456.0371,683.2451,452.0371" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="388.832" x2="685.2451" y1="452.0371" y2="452.0371"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147.9385" x="395.832" y="447.2949">Execute with retry logic</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1228.3052" x="0" y="480.6924"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1228.3052" y1="480.6924" y2="480.6924"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1228.3052" y1="483.6924" y2="483.6924"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2;" width="93.498" x="567.4036" y="470.0371"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="75.2134" x="573.4036" y="486.6055">Retry Logic</text><path d="M335.5205,510.3477 L409.9673,510.3477 L409.9673,517.6582 L399.9673,527.6582 L335.5205,527.6582 L335.5205,510.3477" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="245.4395" style="stroke:#000000;stroke-width:1.5;" width="872.7847" x="335.5205" y="510.3477"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29.4468" x="350.5205" y="523.916">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="107.6797" x="424.9673" y="522.9824">[up to max_retries]</text><g class="message" data-entity-1="part5" data-entity-2="part7" id="msg8"><polygon fill="#181818" points="848.3711,544.9688,858.3711,548.9688,848.3711,552.9688,852.3711,548.9688" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="691.2451" x2="854.3711" y1="548.9688" y2="548.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82.6973" x="698.2451" y="544.2266">Make API call</text></g><path d="M345.5205,563.9688 L407.6592,563.9688 L407.6592,571.2793 L397.6592,581.2793 L345.5205,581.2793 L345.5205,563.9688" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="184.8184" style="stroke:#000000;stroke-width:1.5;" width="852.7847" x="345.5205" y="563.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1387" x="360.5205" y="577.5371">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="74.3735" x="422.6592" y="576.6035">[API Success]</text><g class="message" data-entity-1="part7" data-entity-2="part5" id="msg9"><polygon fill="#181818" points="702.2451,598.5898,692.2451,602.5898,702.2451,606.5898,698.2451,602.5898" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="696.2451" x2="859.3711" y1="602.5898" y2="602.5898"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90.3652" x="708.2451" y="597.8477">Data response</text></g><g class="message" data-entity-1="part5" data-entity-2="part3" id="msg10"><polygon fill="#181818" points="399.832,627.9004,389.832,631.9004,399.832,635.9004,395.832,631.9004" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="393.832" x2="690.2451" y1="631.9004" y2="631.9004"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="48.8833" x="405.832" y="627.1582">Success</text></g><g class="message" data-entity-1="part3" data-entity-2="part4" id="msg11"><polygon fill="#181818" points="569.2354,657.2109,579.2354,661.2109,569.2354,665.2109,573.2354,661.2109" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="388.832" x2="575.2354" y1="661.2109" y2="661.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126.5723" x="395.832" y="656.4688">Reset success count</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="345.5205" x2="1198.3052" y1="670.2109" y2="670.2109"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="68.8789" x="350.5205" y="680.8457">[API Failure]</text><g class="message" data-entity-1="part7" data-entity-2="part5" id="msg12"><polygon fill="#181818" points="702.2451,701.4766,692.2451,705.4766,702.2451,709.4766,698.2451,705.4766" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="696.2451" x2="859.3711" y1="705.4766" y2="705.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61.7754" x="708.2451" y="700.7344">Exception</text></g><g class="message" data-entity-1="part5" data-entity-2="part9" id="msg13"><polygon fill="#181818" points="988.6768,733.7871,998.6768,737.7871,988.6768,741.7871,992.6768,737.7871" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="691.2451" x2="994.6768" y1="737.7871" y2="737.7871"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67.2407" x="698.2451" y="733.0449">Log failure</text></g><path d="M1005,718.4766 L1005,743.4766 L1182,743.4766 L1182,728.4766 L1172,718.4766 L1005,718.4766" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1172,718.4766 L1172,728.4766 L1182,728.4766 L1172,718.4766" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156.6284" x="1011" y="736.0449">Wait exponential backoff</text><path d="M345.5205,769.7871 L407.6592,769.7871 L407.6592,777.0977 L397.6592,787.0977 L345.5205,787.0977 L345.5205,769.7871" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="155.8633" style="stroke:#000000;stroke-width:1.5;" width="480.1479" x="345.5205" y="769.7871"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1387" x="360.5205" y="783.3555">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="99.7197" x="422.6592" y="782.4219">[All retries failed]</text><g class="message" data-entity-1="part5" data-entity-2="part3" id="msg15"><polygon fill="#181818" points="399.832,804.4082,389.832,808.4082,399.832,812.4082,395.832,808.4082" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="393.832" x2="690.2451" y1="808.4082" y2="808.4082"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73.9502" x="405.832" y="803.666">Final failure</text></g><g class="message" data-entity-1="part3" data-entity-2="part4" id="msg16"><polygon fill="#181818" points="569.2354,844.374,579.2354,848.374,569.2354,852.374,573.2354,848.374" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="388.832" x2="575.2354" y1="848.374" y2="848.374"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147.3164" x="395.832" y="843.6318">Increment failure count</text></g><path d="M586,821.4082 L586,861.4082 L737,861.4082 L737,831.4082 L727,821.4082 L586,821.4082" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M727,821.4082 L727,831.4082 L737,831.4082 L727,821.4082" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130.8696" x="592" y="838.9766">If threshold reached,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="81.3008" x="592" y="854.2871">circuit opens</text><g class="message" data-entity-1="part3" data-entity-2="part6" id="msg18"><polygon fill="#181818" points="769.0547,884.3398,779.0547,888.3398,769.0547,892.3398,773.0547,888.3398" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="388.832" x2="775.0547" y1="888.3398" y2="888.3398"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106.2217" x="395.832" y="883.5977">Get fallback data</text></g><g class="message" data-entity-1="part6" data-entity-2="part3" id="msg19"><polygon fill="#181818" points="399.832,913.6504,389.832,917.6504,399.832,921.6504,395.832,917.6504" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="393.832" x2="780.0547" y1="917.6504" y2="917.6504"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112.6899" x="405.832" y="912.9082">Fallback response</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1228.3052" x="0" y="960.3057"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1228.3052" y1="960.3057" y2="960.3057"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1228.3052" y1="963.3057" y2="963.3057"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2;" width="219.0928" x="504.6062" y="949.6504"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="200.8081" x="510.6062" y="966.2188">Response with Error Handling</text><g class="message" data-entity-1="part3" data-entity-2="part2" id="msg20"><polygon fill="#181818" points="191.5342,1000.2715,181.5342,1004.2715,191.5342,1008.2715,187.5342,1004.2715" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="185.5342" x2="387.832" y1="1004.2715" y2="1004.2715"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184.2979" x="197.5342" y="999.5293">QueryResult (success/failure)</text></g><g class="message" data-entity-1="part2" data-entity-2="part9" id="msg21"><polygon fill="#181818" points="988.6768,1029.582,998.6768,1033.582,988.6768,1037.582,992.6768,1033.582" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="180.5342" x2="994.6768" y1="1033.582" y2="1033.582"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113.731" x="187.5342" y="1028.8398">Log result metrics</text></g><path d="M125.1094,1048.582 L187.248,1048.582 L187.248,1055.8926 L177.248,1065.8926 L125.1094,1065.8926 L125.1094,1048.582" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="75.9316" style="stroke:#000000;stroke-width:1.5;" width="845.0415" x="125.1094" y="1048.582"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1387" x="140.1094" y="1062.1504">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="125.6353" x="202.248" y="1061.2168">[Response successful]</text><g class="message" data-entity-1="part2" data-entity-2="part8" id="msg22"><polygon fill="#181818" points="920.6123,1083.2031,930.6123,1087.2031,920.6123,1091.2031,924.6123,1087.2031" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="180.5342" x2="926.6123" y1="1087.2031" y2="1087.2031"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="183.0601" x="187.5342" y="1082.4609">Update cache with fresh data</text></g><g class="message" data-entity-1="part8" data-entity-2="part2" id="msg23"><polygon fill="#181818" points="191.5342,1112.5137,181.5342,1116.5137,191.5342,1120.5137,187.5342,1116.5137" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="185.5342" x2="931.6123" y1="1116.5137" y2="1116.5137"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94.1548" x="197.5342" y="1111.7715">Cache updated</text></g><g class="message" data-entity-1="part2" data-entity-2="part1" id="msg24"><polygon fill="#181818" points="34.1826,1148.8242,24.1826,1152.8242,34.1826,1156.8242,30.1826,1152.8242" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="28.1826" x2="179.5342" y1="1152.8242" y2="1152.8242"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133.3516" x="40.1826" y="1148.082">Response with status</text></g><?plantuml-src bLLDRzim3BthLn0zDS22tWsaGDScMu1rwveLkmGe59cEXSYI9ybjzkz7VTY9aw30T8b1FLAFZn_nqYk41U-KXrz6eULQ871TmjnQO-4hVIgfjx1GvfqnBZmPNnnQrdBhfP0jrnwkxjfMIS6zD7gjLsZVfC0hu0xeOlKcnk07qt1vWaksC-YzjAAJ_hD5laCRaTaqnZsZjt_N-X55pRLqJKH6unYtu4fjkDYjTKmiX-ojO-nyxz5ghjRwxccPadbQdj3ZeaxyuzVuyflPRlC3wPEnsGo-6zjm1JzQaZh81RCP2th2z3QBLS2gspJImvyEYNyoXkj1em9QQmGwzneXrvCOEGi3MIouhr7iGlZ1BmJ9g29Voofa1T81V-DIyOr2ngaN-c34KyDrW9JcNKyOqEdlfcDElTa4bocudMnZR47gHhyHZrxp0hwW9mp9LzvKsGWbzppwzB3JnmQxHTSQxP2XSZXmk5V6OPc83ubDpbd45YbWlaVHUOHtwMkAI3PGPYi5YnwaRSI5CaeH50rMPKmBNGlUGCFthy5BeejNuIIFKDIdPG6FL96n6E44eODnrObGpS4UJh1F3mmVI913hiV0_D1OdaiHBxV1CphItoKy2DDfFtX5IGEH1IdOMVo8u7mli0qDVOdSRPw08ln2TI6QDYI_bTkQAFtcL47SKwgelQHX2OKsLNNWfKlM_x91IAKW5o6-W2NxKAA5fDa-ut9PfAKM5XjYq-DFX3fclwp0rrIfsgYI2CN6_hJMucWwtENdnYDnFWl_Dm-zG56asCBf8ZNvoNOVRucZLVGpB1Xo3VyFrxbBRh88awFTT5nVc-1DA8PmBEwJuVKSe-hI61mYn0rQm4jB-M9Q28bg5SGyg11n8ux9qaN7d6yVbb1XkHOdsJlFVUVOFm00?></g></svg>